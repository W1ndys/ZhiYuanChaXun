<?php
$AreaType = array(
    '山东' => array('普通类')
);
$AreaScore = array(
    '山东' => array('普通类' => array(21199, 144676))
);
$Subject = array(
    '山东' => array(
        '普通类' => array(
            '汉语言文学（师范）' => array('Num' => 0, 'MaxScore' => 572, 'MinScore', 572, 'AvgScore' => 572.00, 'MaxRank' => 44164, 'MinRank' => 44164),
            '法学' => array('Num' => 0, 'MaxScore' => 567, 'MinScore' => 567, 'AvgScore' => 567.00, 'MaxRank' => 52196, 'MinRank' => 52196),
            '思想政治教育（师范）' => array('Num' => 0, 'MaxScore' => 566, 'MinScore' => 566, 'AvgScore' => 566.00, 'MaxRank' => 54147, 'MinRank' => 54147),
            '英语（师范）' => array('Num' => 0, 'MaxScore' => 561, 'MinScore' => 561, 'AvgScore' => 561.00, 'MaxRank' => 60500, 'MinRank' => 60500),
            '历史学（师范）' => array('Num' => 0, 'MaxScore' => 559, 'MinScore' => 559, 'AvgScore' => 559.00, 'MaxRank' => 63234, 'MinRank' => 63234),
            '英语' => array('Num' => 0, 'MaxScore' => 557, 'MinScore' => 557, 'AvgScore' => 557.00, 'MaxRank' => 65942, 'MinRank' => 65942),
            '汉语国际教育（师范）' => array('Num' => 0, 'MaxScore' => 557, 'MinScore' => 557, 'AvgScore' => 557.00, 'MaxRank' => 65942, 'MinRank' => 65942),
            '教育学（师范）' => array('Num' => 0, 'MaxScore' => 555, 'MinScore' => 555, 'AvgScore' => 555.00, 'MaxRank' => 68861, 'MinRank' => 68861),
            '小学教育（师范）' => array('Num' => 0, 'MaxScore' => 553, 'MinScore' => 553, 'AvgScore' => 553.00, 'MaxRank' => 71855, 'MinRank' => 71855),
            '地理科学（师范）' => array('Num' => 0, 'MaxScore' => 552, 'MinScore' => 552, 'AvgScore' => 552.00, 'MaxRank' => 73115, 'MinRank' => 73115),
            '财务管理' => array('Num' => 0, 'MaxScore' => 551, 'MinScore' => 551, 'AvgScore' => 551.00, 'MaxRank' => 74897, 'MinRank' => 74897),
            '政治学与行政学' => array('Num' => 0, 'MaxScore' => 550, 'MinScore' => 550, 'AvgScore' => 550.00, 'MaxRank' => 76535, 'MinRank' => 76535),
            '文物与博物馆学' => array('Num' => 0, 'MaxScore' => 547, 'MinScore' => 547, 'AvgScore' => 547.00, 'MaxRank' => 81428, 'MinRank' => 81428),
            '数学与应用数学（师范）' => array('Num' => 0, 'MaxScore' => 546, 'MinScore' => 546, 'AvgScore' => 546.00, 'MaxRank' => 83093, 'MinRank' => 83093),
            '心理学（师范）' => array('Num' => 0, 'MaxScore' => 545, 'MinScore' => 545, 'AvgScore' => 545.00, 'MaxRank' => 84781, 'MinRank' => 84781),
            '电子信息工程' => array('Num' => 0, 'MaxScore' => 544, 'MinScore' => 544, 'AvgScore' => 544.00, 'MaxRank' => 86343, 'MinRank' => 86343),
            '电气工程及其自动化' => array('Num' => 0, 'MaxScore' => 543, 'MinScore' => 543, 'AvgScore' => 543.00, 'MaxRank' => 88128, 'MinRank' => 88128),
            '数学与应用数学' => array('Num' => 0, 'MaxScore' => 543, 'MinScore' => 543, 'AvgScore' => 543.00, 'MaxRank' => 88128, 'MinRank' => 88128),
            '经济学' => array('Num' => 0, 'MaxScore' => 542, 'MinScore' => 542, 'AvgScore' => 542.00, 'MaxRank' => 89872, 'MinRank' => 89872),
            '计算机科学与技术（师范）' => array('Num' => 0, 'MaxScore' => 541, 'MinScore' => 541, 'AvgScore' => 541.00, 'MaxRank' => 91627, 'MinRank' => 91627),
            '数据科学与大数据技术' => array('Num' => 0, 'MaxScore' => 541, 'MinScore' => 541, 'AvgScore' => 541.00, 'MaxRank' => 91627, 'MinRank' => 91627),
            '通信工程' => array('Num' => 0, 'MaxScore' => 541, 'MinScore' => 541, 'AvgScore' => 541.00, 'MaxRank' => 91627, 'MinRank' => 91627),
            '文化产业管理' => array('Num' => 0, 'MaxScore' => 539, 'MinScore' => 539, 'AvgScore' => 539.00, 'MaxRank' => 95162, 'MinRank' => 95162),
            '新闻学' => array('Num' => 0, 'MaxScore' => 539, 'MinScore' => 539, 'AvgScore' => 539.00, 'MaxRank' => 95162, 'MinRank' => 95162),
            '网络空间安全' => array('Num' => 0, 'MaxScore' => 538, 'MinScore' => 538, 'AvgScore' => 538.00, 'MaxRank' => 96989, 'MinRank' => 96989),
            '光电信息科学与工程' => array('Num' => 0, 'MaxScore' => 537, 'MinScore' => 537, 'AvgScore' => 537.00, 'MaxRank' => 98357, 'MinRank' => 98357),
            '俄语' => array('Num' => 0, 'MaxScore' => 536, 'MinScore' => 536, 'AvgScore' => 536.00, 'MaxRank' => 100722, 'MinRank' => 100722),
            '翻译' => array('Num' => 0, 'MaxScore' => 536, 'MinScore' => 536, 'AvgScore' => 536.00, 'MaxRank' => 100722, 'MinRank' => 100722),
            '工商管理' => array('Num' => 0, 'MaxScore' => 536, 'MinScore' => 536, 'AvgScore' => 536.00, 'MaxRank' => 100722, 'MinRank' => 100722),
            '土地资源管理' => array('Num' => 0, 'MaxScore' => 535, 'MinScore' => 535, 'AvgScore' => 535.00, 'MaxRank' => 102601, 'MinRank' => 102601),
            '人工智能' => array('Num' => 0, 'MaxScore' => 535, 'MinScore' => 535, 'AvgScore' => 535.00, 'MaxRank' => 102601, 'MinRank' => 102601),
            '统计学' => array('Num' => 0, 'MaxScore' => 535, 'MinScore' => 535, 'AvgScore' => 535.00, 'MaxRank' => 102601, 'MinRank' => 102601),
            '日语（师范）' => array('Num' => 0, 'MaxScore' => 534, 'MinScore' => 534, 'AvgScore' => 534.00, 'MaxRank' => 104521, 'MinRank' => 104521),
            '自动化' => array('Num' => 0, 'MaxScore' => 534, 'MinScore' => 534, 'AvgScore' => 534.00, 'MaxRank' => 104521, 'MinRank' => 104521),
            '物流管理' => array('Num' => 0, 'MaxScore' => 534, 'MinScore' => 534, 'AvgScore' => 534.00, 'MaxRank' => 104521, 'MinRank' => 104521),
            '广播电视学' => array('Num' => 0, 'MaxScore' => 534, 'MinScore' => 534, 'AvgScore' => 534.00, 'MaxRank' => 104521, 'MinRank' => 104521),
            '国际经济与贸易' => array('Num' => 0, 'MaxScore' => 534, 'MinScore' => 534, 'AvgScore' => 534.00, 'MaxRank' => 104521, 'MinRank' => 104521),
            '软件工程' => array('Num' => 0, 'MaxScore' => 533, 'MinScore' => 533, 'AvgScore' => 533.00, 'MaxRank' => 106424, 'MinRank' => 106424),
            '新能源材料与器件' => array('Num' => 0, 'MaxScore' => 533, 'MinScore' => 533, 'AvgScore' => 533.00, 'MaxRank' => 106424, 'MinRank' => 106424),
            '数据科学' => array('Num' => 0, 'MaxScore' => 533, 'MinScore' => 533, 'AvgScore' => 533.00, 'MaxRank' => 106424, 'MinRank' => 106424),
            '旅游管理' => array('Num' => 0, 'MaxScore' => 530, 'MinScore' => 530, 'AvgScore' => 530.00, 'MaxRank' => 112306, 'MinRank' => 112306),
            '物理学（师范）' => array('Num' => 0, 'MaxScore' => 528, 'MinScore' => 528, 'AvgScore' => 528.00, 'MaxRank' => 112306, 'MinRank' => 112306),
            '光电信息科学与工程' => array('Num' => 0, 'MaxScore' => 528, 'MinScore' => 528, 'AvgScore' => 528.00, 'MaxRank' => 112306, 'MinRank' => 112306),
            '计算机科学与技术' => array('Num' => 0, 'MaxScore' => 527, 'MinScore' => 527, 'AvgScore' => 527.00, 'MaxRank' => 120568, 'MinRank' => 120568),
            '智能感知工程' => array('Num' => 0, 'MaxScore' => 526, 'MinScore' => 526, 'AvgScore' => 526.00, 'MaxRank' => 123666, 'MinRank' => 123666),
            '金融工程' => array('Num' => 0, 'MaxScore' => 525, 'MinScore' => 525, 'AvgScore' => 525.00, 'MaxRank' => 124857, 'MinRank' => 124857),
            '化学工程与工艺' => array('Num' => 0, 'MaxScore' => 524, 'MinScore' => 524, 'AvgScore' => 524.00, 'MaxRank' => 129038, 'MinRank' => 129038),
            '材料化学' => array('Num' => 0, 'MaxScore' => 522, 'MinScore' => 522, 'AvgScore' => 522.00, 'MaxRank' => 133792, 'MinRank' => 133792),
            '化学（师范）' => array('Num' => 0, 'MaxScore' => 521, 'MinScore' => 521, 'AvgScore' => 521.00, 'MaxRank' => 137792, 'MinRank' => 137792),
            '生物科学（师范）' => array('Num' => 0, 'MaxScore' => 518, 'MinScore' => 518, 'AvgScore' => 518.00, 'MaxRank' => 145376, 'MinRank' => 145376),
            '教育技术学（师范）' => array('Num' => 0, 'MaxScore' => 517, 'MinScore' => 517, 'AvgScore' => 517.00, 'MaxRank' => 150199, 'MinRank' => 150199),
            '戏剧影视文学' => array('Num' => 0, 'MaxScore' => 515, 'MinScore' => 515, 'AvgScore' => 515.00, 'MaxRank' => 144676, 'MinRank' => 144676),
            '生态学' => array('Num' => 0, 'MaxScore' => 515, 'MinScore' => 515, 'AvgScore' => 515.00, 'MaxRank' => 144676, 'MinRank' => 144676),
        )
    )
);
if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    if (isset($_GET['type'])) {
        if ($_GET['type'] === 'area') {
            if (isset($_GET['province'])) {
                echo (json_encode($AreaType[$_GET['province']]));
            } else {
                echo (json_encode(array_keys($AreaType)));
            }
        } else if ($_GET['type'] === 'rank') {
            if (isset($_GET['province']) && isset($_GET['major'])) {
                if (isset($_GET['rank']) && $_GET['rank'] != '') {
                    $rank = intval($_GET['rank']);
                    $high_major = array();
                    $middle_major = array();
                    $low_major = array();
                    foreach ($Subject[$_GET['province']][$_GET['major']] as $key => $value) {
                        if ($value['MaxRank'] >= $rank) {
                            array_push($low_major, array('Subject' => $key) + $value);
                        } else if ($value['MinRank'] < $rank) {
                            array_push($high_major, array('Subject' => $key) + $value);
                        } else {
                            array_push($middle_major, array('Subject' => $key) + $value);
                        }
                    }
                    echo (json_encode(array('high_major' => $high_major, 'middle_major' => $middle_major, 'low_major' => $low_major)));
                } else {
                    echo (json_encode($AreaScore[$_GET['province']][$_GET['major']]));
                }
            }
        }
        die();
    }
}
?>
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <script src="https://act.mcsog.top/js/vue.global.js"></script>
    <link rel="stylesheet" href="https://act.mcsog.top/css/index.css">
    <script src="https://act.mcsog.top/js/index.full.js"></script>
    <title>Easy-QFNU-志愿查询</title>
</head>

<body>
    <div id="app">
        <h1>曲阜师范大学志愿查询</h1>
        <p>此页面查询结果仅供参考，请勿过度依赖此页面结果，理性填报，数据来源于：<a href="https://zsb.qfnu.edu.cn/static/front/qfnu/basic/html_web/lnfs.html">曲阜师范大学本科招生网</a></p>
        <p>
            点击链接加入群聊
            <a href="https://qm.qq.com/q/T04jorATMQ" target="_blank" rel="noopener noreferrer">
                【2025曲阜师范大学新生交流群】
            </a>
        </p>
        <el-form :model="form" :inline="true">
            <el-form-item label="省份">
                <el-select v-model="form.province" placeholder="请选择省份" style="width:150px">
                    <el-option label="山东" value="山东"></el-option>
                </el-select>
            </el-form-item>
            <el-form-item label="科类">
                <el-select v-model="form.major" placeholder="请选择科类" style="width:150px">
                    <el-option label="普通类" value="普通类"></el-option>
                </el-select>
            </el-form-item>
            <el-form-item label="位次">
                <el-input-number v-model="form.rank" :min="0" :max="5000000" @change="getSubject" style="width:150px" />
            </el-form-item>
        </el-form>
        <p>最高排名：{{maxRank}}&nbsp;最低排名：{{minRank}}</p>
        <h2>高于排名的专业</h2>
        <el-table v-if="form.rank>0" :data="subjectList.high_major" style="width: 100%" :empty-text="high_text">
            <el-table-column prop="Subject" label="专业"></el-table-column>
            <el-table-column prop="Num" label="招生人数(0表示暂无数据)"></el-table-column>
            <el-table-column prop="MaxScore" label="最高分"></el-table-column>
            <el-table-column prop="MinScore" label="最低分"></el-table-column>
            <el-table-column prop="AvgScore" label="平均分"></el-table-column>
            <el-table-column prop="MaxRank" label="最高排名"></el-table-column>
            <el-table-column prop="MinRank" label="最低排名"></el-table-column>
        </el-table>
        <h2>接近排名的专业</h2>
        <el-table v-if="form.rank>0" :data="subjectList.middle_major" style="width: 100%" :empty-text="middle_text">
            <el-table-column prop="Subject" label="专业"></el-table-column>
            <el-table-column prop="Num" label="招生人数(0表示暂无数据)"></el-table-column>
            <el-table-column prop="MaxScore" label="最高分"></el-table-column>
            <el-table-column prop="MinScore" label="最低分"></el-table-column>
            <el-table-column prop="AvgScore" label="平均分"></el-table-column>
            <el-table-column prop="MaxRank" label="最高排名"></el-table-column>
            <el-table-column prop="MinRank" label="最低排名"></el-table-column>
        </el-table>
        <h2>低于排名的专业</h2>
        <el-table v-if="form.rank>0" :data="subjectList.low_major" style="width: 100%" empty-text="没有数据">
            <el-table-column prop="Subject" label="专业"></el-table-column>
            <el-table-column prop="Num" label="招生人数(0表示暂无数据)"></el-table-column>
            <el-table-column prop="MaxScore" label="最高分"></el-table-column>
            <el-table-column prop="MinScore" label="最低分"></el-table-column>
            <el-table-column prop="AvgScore" label="平均分"></el-table-column>
            <el-table-column prop="MaxRank" label="最高排名"></el-table-column>
            <el-table-column prop="MinRank" label="最低排名"></el-table-column>
        </el-table>
        <el-image style="width: 400px; height: 400px" src="https://act.mcsog.top/qr.png"></el-image>
        <p>Fork by W1ndys<a href="https://easy-qfnu.top">Easy-QFNU | W1ndys | 微信公众号【W1ndys】</a></p>
        <p>Powered by <a href="https://dlusec.cn/">曲阜师范大学网络安全协会</a>&amp;MCSOG&amp;<a href="https://mcsog.top/">f00001111</a></p>
        <p>已加入School Robot V2计划</p>
    </div>
    <script>
        const App = {
            mounted() {
                this.getProvince();
            },
            methods: {
                getProvince() {
                    this.provinceList = ['山东'];
                    this.high_text = "你的排名超过了大多数专业哦~";
                    this.middle_text = "你的排名可能不太合适";
                },
                getMajor() {
                    this.majorList = ['普通类'];
                    this.form.major = '普通类';
                    this.high_text = "你的排名超过了大多数专业哦~";
                    this.middle_text = "你的排名可能不太合适";
                    this.getRank();
                },
                getRank() {
                    this.maxRank = 71818;
                    this.minRank = 157763;
                    this.high_text = "你的排名超过了大多数专业哦~";
                    this.middle_text = "你的排名可能不太合适";
                    this.getSubject();
                },
                getSubject() {
                    if (this.form.rank == 0 || this.form.major == "" || this.form.province == "") {
                        this.high_text = "没有数据";
                        this.middle_text = "没有数据";
                        return;
                    }
                    this.high_text = "你的排名超过了大多数专业哦~";
                    this.middle_text = "你的排名可能不太合适";
                    fetch(
                            "?type=rank&province=山东&major=普通类&rank=" + this.form.rank
                        )
                        .then((response) => response.json())
                        .then((data) => {
                            this.subjectList = data;
                        });
                },
            },
            data() {
                return {
                    provinceList: {},
                    majorList: {},
                    subjectList: {},
                    form: {
                        province: "",
                        major: "",
                        rank: 0,
                    },
                    maxRank: 0,
                    minRank: 0,
                    high_text: "没有数据",
                    middle_text: "没有数据",
                };
            },
        };
        const app = Vue.createApp(App);
        app.use(ElementPlus);
        app.mount("#app");
    </script>
</body>

</html>